(function(){"use strict";var e={1763:function(e,t,a){e.exports=a.p+"img/avatar3.a1ab1026.png"},4010:function(e,t,a){e.exports=a.p+"img/avatar2.dce8a1e3.png"},5516:function(e,t,a){e.exports=a.p+"img/avatar4.dd943c90.png"},8193:function(e,t,a){var r=a(6848),n=function(){var e=this,t=e._self._c;return t("v-app",[t("TournamentLeaderboard")],1)},s=[],o=function(){var e=this,t=e._self._c;return t("v-card",{staticClass:"tournament-leaderboard neon-card pa-4"},[t("div",{staticClass:"leaderboard-banner"},[e._v("üèÜ TOURNAMENT LEADERBOARD üèÜ")]),e.error?e._e():t("v-row",{staticClass:"mb-4 mt-6",attrs:{dense:""}},[t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-text-field",{staticClass:"filter-input",attrs:{label:"Search by username","prepend-inner-icon":"mdi-magnify",outlined:"",dense:""},model:{value:e.filters.username,callback:function(t){e.$set(e.filters,"username",t)},expression:"filters.username"}})],1),t("v-col",{attrs:{cols:"12",sm:"4"}},[t("v-select",{staticClass:"filter-input",attrs:{items:e.countries,"item-text":"name","item-value":"code",label:"Country",outlined:"",dense:"",clearable:""},scopedSlots:e._u([{key:"item",fn:function({item:a}){return[t("div",{staticClass:"d-flex align-center"},[t("img",{staticClass:"flag-img",attrs:{src:e.getFlagUrl(a.code),alt:""}}),t("span",[e._v(e._s(a.name))])])]}}],null,!1,3536438613),model:{value:e.filters.country,callback:function(t){e.$set(e.filters,"country",t)},expression:"filters.country"}})],1),t("v-col",{staticClass:"d-flex justify-center",attrs:{cols:"12",sm:"4"}},[t("v-btn",{staticClass:"clear-btn",style:{visibility:e.filters.username||e.filters.country?"visible":"hidden"},attrs:{disabled:!e.filters.username&&!e.filters.country},on:{click:e.clearFilters}},[e._v(" Clear Filters ")])],1)],1),e.loading?t("div",{staticClass:"text-center my-6"},[t("v-progress-circular",{attrs:{indeterminate:"",color:"primary",size:"40"}}),t("div",{staticClass:"mt-2 grey--text"},[e._v("Loading leaderboard data...")])],1):e.error?t("v-alert",{staticClass:"my-4",attrs:{type:"error",outlined:"",prominent:""}},[e._v(" "+e._s(e.error)+" "),t("v-btn",{staticClass:"retry-btn",attrs:{small:""},on:{click:e.retryLoad}},[e._v("Retry")])],1):e.participants.length?t("v-data-table",{staticClass:"elevation-1 leaderboard-table",attrs:{headers:e.headers,items:e.participants,loading:e.loading,"disable-pagination":"","hide-default-footer":"","aria-label":"Tournament leaderboard table"},scopedSlots:e._u([{key:"item.rank",fn:function({item:a}){return[1===a.rank?t("v-icon",{attrs:{color:"amber darken-2"}},[e._v("mdi-crown")]):2===a.rank?t("v-icon",{attrs:{color:"blue-grey lighten-1"}},[e._v("mdi-crown-outline")]):3===a.rank?t("v-icon",{attrs:{color:"brown darken-1"}},[e._v("mdi-crown-outline")]):t("span",[e._v(e._s(a.rank))])]}},{key:"item.username",fn:function({item:a}){return[a.avatar?t("img",{staticClass:"user-avatar",attrs:{src:a.avatar,alt:"avatar"}}):e._e(),e._v(" "+e._s(a.username)+" ")]}},{key:"item.country",fn:function({item:a}){return[t("img",{staticClass:"flag-img",attrs:{src:e.getFlagUrl(a.country),alt:"flag"}}),e._v(" "+e._s(a.countryName)+" ")]}},{key:"item.score",fn:function({item:t}){return[e._v(" "+e._s(e.formatScore(t.score))+" ")]}}])}):t("v-alert",{staticClass:"my-4",attrs:{type:"info",outlined:"",icon:"mdi-information"}},[e._v(" No participants found. Try adjusting your filters. ")]),e.error?e._e():t("v-card-actions",{staticClass:"justify-space-between flex-wrap mt-4"},[t("span",{staticClass:"grey--text text--darken-1"},[e._v(" Showing "+e._s(e.pageStart)+"‚Äì"+e._s(e.pageEnd)+" of "+e._s(e.totalElements)+" results ")]),t("div",{staticClass:"d-flex align-center"},[t("v-pagination",{staticClass:"custom-pagination",attrs:{length:e.totalPages,disabled:e.loading},on:{input:e.changePage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)])],1)},i=[],l=a(3518),c={name:"TournamentLeaderboard",data(){return{headers:[{text:"Rank",value:"rank"},{text:"Username",value:"username"},{text:"Country",value:"country"},{text:"Score",value:"score"}],filters:{username:"",country:""},countries:[],pageableParams:{page:0,size:10,sort:{value:"score",order:"desc"}},currentPage:1,debounceTimer:null}},computed:{...(0,l.aH)("leaderboard",["totalElements","totalPages","error","loading"]),...(0,l.L8)("leaderboard",["leaderboardParticipants"]),participants(){return this.leaderboardParticipants},pageStart(){return this.participants.length?this.pageableParams.page*this.pageableParams.size+1:0},pageEnd(){return Math.min((this.pageableParams.page+1)*this.pageableParams.size,this.totalElements)},isFirstPage(){return this.currentPage<=1},isLastPage(){return this.currentPage>=this.totalPages||0===this.totalPages}},watch:{"filters.username":{handler(){localStorage.setItem("leaderboardFilters",JSON.stringify(this.filters)),clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(()=>{this.applyFilters()},500)}},"filters.country"(){localStorage.setItem("leaderboardFilters",JSON.stringify(this.filters)),this.applyFilters()},currentPage(e){localStorage.setItem("leaderboardPage",String(e))}},mounted(){const e=localStorage.getItem("leaderboardFilters");if(e)try{this.filters=JSON.parse(e)}catch(a){console.warn("Could not parse saved filters",a)}const t=localStorage.getItem("leaderboardPage");if(t){const e=parseInt(t,10);!isNaN(e)&&e>0&&(this.currentPage=e,this.pageableParams.page=e-1)}this.loadCountries(),this.loadLeaderboard()},methods:{...(0,l.i0)("leaderboard",["fetchLeaderboard"]),async loadLeaderboard(){await this.fetchLeaderboard({page:this.pageableParams.page,size:this.pageableParams.size,sort:this.pageableParams.sort,filters:this.filters})},async loadCountries(){try{this.countries=await this.$store.dispatch("leaderboard/fetchCountries")}catch(e){console.warn("Could not load countries",e)}},async applyFilters(){this.pageableParams.page=0,this.currentPage=1,await this.loadLeaderboard()},clearFilters(){this.filters={username:"",country:""},this.pageableParams.page=0,this.currentPage=1,this.loadLeaderboard()},changePage(e){e<1||e>this.totalPages||(this.pageableParams.page=e-1,this.currentPage=e,this.loadLeaderboard())},goPrevPage(){this.isFirstPage||this.loading||this.changePage(this.currentPage-1)},goNextPage(){this.isLastPage||this.loading||this.changePage(this.currentPage+1)},retryLoad(){this.loadLeaderboard()},getFlagUrl(e){return e?`https://flagcdn.com/24x18/${e.toLowerCase()}.png`:""},formatScore(e){return Math.round(e).toLocaleString()}},beforeDestroy(){clearTimeout(this.debounceTimer)}},d=c,u=a(1656),m=(0,u.A)(d,o,i,!1,null,"ba8f1ab4",null),g=m.exports,p={name:"App",components:{TournamentLeaderboard:g}},f=p,h=(0,u.A)(f,n,s,!1,null,null,null),b=h.exports;a(4114),a(8111),a(2489),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const v=[{code:"US",name:"United States"},{code:"GB",name:"United Kingdom"},{code:"ES",name:"Spain"},{code:"JP",name:"Japan"},{code:"DE",name:"Germany"},{code:"AU",name:"Australia"},{code:"FR",name:"France"},{code:"CA",name:"Canada"},{code:"BR",name:"Brazil"},{code:"IT",name:"Italy"}],y=["trader","forex","crypto","pro","ninja","master"],P=["king","queen","ace","star","legend","pro"],_=[a(8769),a(4010),a(1763),a(5516)];function w(e){const t=[];for(let a=1;a<=e;a++){const e=v[Math.floor(Math.random()*v.length)],r=y[Math.floor(Math.random()*y.length)],n=P[Math.floor(Math.random()*P.length)],s=_[Math.floor(Math.random()*_.length)];t.push({id:a,username:`${r}_${n}_${a}`,country:e.code,countryName:e.name,score:Math.max(1e3,2e4-300*a+200*Math.random()),rank:a,avatar:s})}return t}var C=w;class L{constructor(){this.participants=C(50),console.log("Participants generated:",this.participants.length)}async getLeaderboard(e){if(await this.simulateDelay(),this.SimulateError())throw new Error("Failed to fetch leaderboard");const t=e.size,a=e.page,r=e.sort?.value||"rank",n=e.sort?.order||"asc",s=[...this.participants].sort((e,t)=>{const a=e[r],s=t[r];return a<s?"asc"===n?-1:1:a>s?"asc"===n?1:-1:0}),o=a*t,i=o+t,l=s.slice(o,i);return{content:l,totalElements:this.participants.length,totalPages:Math.ceil(this.participants.length/t),number:a,size:t}}async getFilteredLeaderboard(e={},t){await this.simulateDelay();const{username:a="",country:r=""}=e;let n=[...this.participants];a&&(n=n.filter(e=>e.username.toLowerCase().startsWith(a.toLowerCase()))),r&&(n=n.filter(e=>e.country===r));const s=new L;return s.participants=n,s.getLeaderboard(t)}async getCountries(){await this.simulateDelay();const e=new Set,t=[];for(const a of this.participants)e.has(a.country)||(e.add(a.country),t.push({code:a.country,name:a.countryName}));return t.sort((e,t)=>e.name.localeCompare(t.name)),t}simulateDelay(){const e=500*Math.random()+300;return new Promise(t=>setTimeout(t,e))}SimulateError(){return Math.random()<.1}}var x=new L;const S={participants:[],totalElements:0,totalPages:0,loading:!1,error:null},k={setLeaderboard(e,t){e.participants=t},setPageInfo(e,{totalElements:t,totalPages:a}){e.totalElements=t,e.totalPages=a},setLoading(e,t){e.loading=t},setError(e,t){e.error=t},clearLeaderboard(e){e.participants=[],e.totalElements=0,e.totalPages=0}},E={async fetchLeaderboard({commit:e},{page:t,size:a,sort:r,filters:n}){e("setLoading",!0),e("setError",null);try{let s;const o=n&&(n.username&&""!==n.username.trim()||n.country&&""!==n.country.trim());s=o?await x.getFilteredLeaderboard(n,{page:t,size:a,sort:r}):await x.getLeaderboard({page:t,size:a,sort:r}),e("setLeaderboard",s.content),e("setPageInfo",{totalElements:s.totalElements,totalPages:s.totalPages})}catch(s){e("setError",s.message||"Error loading leaderboard")}finally{e("setLoading",!1)}},async fetchCountries(){return await x.getCountries()}},F={leaderboardParticipants:e=>e.participants,isLoading:e=>e.loading,hasError:e=>!!e.error};var T={namespaced:!0,state:S,mutations:k,actions:E,getters:F};r["default"].use(l.Ay);var M=new l.Ay.Store({modules:{leaderboard:T}}),O=a(3691),j=a.n(O);a(4301);r["default"].use(j()),new r["default"]({store:M,vuetify:new(j()),render:e=>e(b)}).$mount("#app")},8769:function(e,t,a){e.exports=a.p+"img/avatar1.7013f112.png"}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,s){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],s=e[d][2];for(var i=!0,l=0;l<r.length;l++)(!1&s||o>=s)&&Object.keys(a.O).every(function(e){return a.O[e](r[l])})?r.splice(l--,1):(i=!1,s<o&&(o=s));if(i){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,n,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/tournament-leaderboard/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,o=r[0],i=r[1],l=r[2],c=0;if(o.some(function(t){return 0!==e[t]})){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(l)var d=l(a)}for(t&&t(r);c<o.length;c++)s=o[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},r=self["webpackChunktournament_leaderboard"]=self["webpackChunktournament_leaderboard"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],function(){return a(8193)});r=a.O(r)})();
//# sourceMappingURL=app.705bfbf6.js.map